<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Segment Tree实现Segment Tree BuildThe structure of Segment Tree is a binary tree which each node has two attributes start and end denote an segment / interval.
start and end are both integers, they shou">
<meta property="og:type" content="article">
<meta property="og:title" content="Segment Tree">
<meta property="og:url" content="http://yoursite.com/2016/06/03/segment-tree/index.html">
<meta property="og:site_name" content="随记">
<meta property="og:description" content="Segment Tree实现Segment Tree BuildThe structure of Segment Tree is a binary tree which each node has two attributes start and end denote an segment / interval.
start and end are both integers, they shou">
<meta property="og:updated_time" content="2016-06-03T13:16:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Segment Tree">
<meta name="twitter:description" content="Segment Tree实现Segment Tree BuildThe structure of Segment Tree is a binary tree which each node has two attributes start and end denote an segment / interval.
start and end are both integers, they shou">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Segment Tree</title>
    <!-- styles -->
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/01/04/remove-invalid-parentheses/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2016/06/03/trie/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2016/06/03/segment-tree/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2016/06/03/segment-tree/&text=Segment Tree"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2016/06/03/segment-tree/&is_video=false&description=Segment Tree"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Segment Tree&body=Check out this article: http://yoursite.com/2016/06/03/segment-tree/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2016/06/03/segment-tree/&name=Segment Tree&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Segment-Tree实现"><span class="toc-number">1.</span> <span class="toc-text">Segment Tree实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Build"><span class="toc-number">1.1.</span> <span class="toc-text">Segment Tree Build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Build-II"><span class="toc-number">1.2.</span> <span class="toc-text">Segment Tree Build II</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Query"><span class="toc-number">1.3.</span> <span class="toc-text">Segment Tree Query</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Query-II"><span class="toc-number">1.4.</span> <span class="toc-text">Segment Tree Query II</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Modify"><span class="toc-number">1.5.</span> <span class="toc-text">Segment Tree Modify</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#线段树应用"><span class="toc-number">2.</span> <span class="toc-text">线段树应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Count-of-Smaller-Number-before-itself"><span class="toc-number">2.1.</span> <span class="toc-text">Count of Smaller Number before itself</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Count-of-Smaller-Number"><span class="toc-number">2.2.</span> <span class="toc-text">Count of Smaller Number</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Segment Tree
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">随记</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-06-03T02:40:00.000Z" itemprop="datePublished">2016-06-03</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Leetcode/">Leetcode</a>, <a class="tag-link" href="/tags/Lintcode/">Lintcode</a>, <a class="tag-link" href="/tags/coding-templete/">coding templete</a>, <a class="tag-link" href="/tags/segment-tree/">segment tree</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Segment-Tree实现"><a href="#Segment-Tree实现" class="headerlink" title="Segment Tree实现"></a>Segment Tree实现</h2><h3 id="Segment-Tree-Build"><a href="#Segment-Tree-Build" class="headerlink" title="Segment Tree Build"></a>Segment Tree Build</h3><p>The structure of Segment Tree is a binary tree which each node has two attributes start and end denote an segment / interval.</p>
<p>start and end are both integers, they should be assigned in following rules:</p>
<ul>
<li>The root’s start and end is given by build method.</li>
<li>The left child of node A has start=A.left, end=(A.left + A.right) / 2.</li>
<li>The right child of node A has start=(A.left + A.right) / 2 + 1, end=A.right.</li>
<li>if start equals to end, there will be no children for this node.</li>
</ul>
<p>Implement a build method with two parameters start and end, so that we can create a corresponding segment tree with every node has the correct start and end value, return the root of this segment tree.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SegmentTreeNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">int</span> l, r;</div><div class="line">    SegmentTreeNode *left, *right;</div><div class="line">    SegmentTreeNode(<span class="keyword">int</span> l, <span class="keyword">int</span> r) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;l = l, <span class="keyword">this</span>-&gt;r = r;</div><div class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *@param l, r: Denote an segment / interval</div><div class="line">     *@return: The root of Segment Tree</div><div class="line">     */</div><div class="line">    <span class="function">SegmentTreeNode * <span class="title">building</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        SegmentTreeNode * node = <span class="keyword">new</span> SegmentTreeNode(l, r);</div><div class="line">        <span class="keyword">if</span> (l == r)</div><div class="line">            <span class="keyword">return</span> node;</div><div class="line">        <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</div><div class="line">        node-&gt;left = building(l, mid);</div><div class="line">        node-&gt;right = building(mid+<span class="number">1</span>, r);</div><div class="line">        <span class="keyword">return</span> node;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Segment-Tree-Build-II"><a href="#Segment-Tree-Build-II" class="headerlink" title="Segment Tree Build II"></a>Segment Tree Build II</h3><p>The structure of Segment Tree is a binary tree which each node has two attributes start and end denote an segment / interval.</p>
<p>start and end are both integers, they should be assigned in following rules:</p>
<ul>
<li>The root’s start and end is given by build method.</li>
<li>The left child of node A has start=A.left, end=(A.left + A.right) / 2.</li>
<li>The right child of node A has start=(A.left + A.right) / 2 + 1, end=A.right.</li>
<li>if start equals to end, there will be no children for this node.</li>
</ul>
<p>Implement a build method with a given array, so that we can create a corresponding segment tree with every node value represent the corresponding interval max value in the array, return the root of this segment tree.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SegmentTreeNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">int</span> start, end, max;</div><div class="line">    SegmentTreeNode *left, *right;</div><div class="line">    SegmentTreeNode(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> max) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;start = start;</div><div class="line">        <span class="keyword">this</span>-&gt;end = end;</div><div class="line">        <span class="keyword">this</span>-&gt;max = max;</div><div class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *@param A: a list of integer</div><div class="line">     *@return: The root of Segment Tree</div><div class="line">     */</div><div class="line">    <span class="function">SegmentTreeNode * <span class="title">build</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">return</span> buildTree(<span class="number">0</span>, A.size()<span class="number">-1</span>, A);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function">SegmentTreeNode * <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (start &gt; end)</div><div class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">        SegmentTreeNode * node = <span class="keyword">new</span> SegmentTreeNode(start, end, A[start]);</div><div class="line">        <span class="keyword">if</span> (start == end)</div><div class="line">            <span class="keyword">return</span> node;</div><div class="line">        <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</div><div class="line">        node-&gt;left = buildTree(start, mid, A);</div><div class="line">        node-&gt;right = buildTree(mid+<span class="number">1</span>, end, A);</div><div class="line">        <span class="keyword">if</span> (node-&gt;left &amp;&amp; node-&gt;left-&gt;max &gt; node-&gt;max)</div><div class="line">            node-&gt;max = node-&gt;left-&gt;max;</div><div class="line">        <span class="keyword">if</span> (node-&gt;right &amp;&amp; node-&gt;right-&gt;max &gt; node-&gt;max)</div><div class="line">            node-&gt;max = node-&gt;right-&gt;max;</div><div class="line">        <span class="keyword">return</span> node;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Segment-Tree-Query"><a href="#Segment-Tree-Query" class="headerlink" title="Segment Tree Query"></a>Segment Tree Query</h3><p>For an integer array (index from 0 to n-1, where n is the size of this array), in the corresponding SegmentTree, each node stores an extra attribute max to denote the maximum number in the interval of the array (index from start to end).</p>
<p>Design a query method with three parameters root, start and end, find the maximum number in the interval [start, end] by the given root of segment tree.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SegmentTreeNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">int</span> start, end, max;</div><div class="line">    SegmentTreeNode *left, *right;</div><div class="line">    SegmentTreeNode(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> max) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;start = start;</div><div class="line">        <span class="keyword">this</span>-&gt;end = end;</div><div class="line">        <span class="keyword">this</span>-&gt;max = max;</div><div class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *@param root, start, end: The root of segment tree and </div><div class="line">     *                         an segment / interval</div><div class="line">     *@return: The maximum number in the interval [start, end]</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(SegmentTreeNode *root, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span> (root-&gt;end &lt; start || root-&gt;start &gt; end)</div><div class="line">            <span class="keyword">return</span> <span class="number">-0x7ffffff</span>;</div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (root-&gt;start &gt;= start &amp;&amp; root-&gt;end &lt;= end)</div><div class="line">            <span class="keyword">return</span> root-&gt;max;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> l = query(root-&gt;left, start, end);</div><div class="line">        <span class="keyword">int</span> r = query(root-&gt;right, start, end);</div><div class="line">        <span class="keyword">return</span> l &gt; r ? l : r;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Segment-Tree-Query-II"><a href="#Segment-Tree-Query-II" class="headerlink" title="Segment Tree Query II"></a>Segment Tree Query II</h3><p>For an array, we can build a SegmentTree for it, each node stores an extra attribute count to denote the number of elements in the the array which value is between interval start and end. (The array may not fully filled by elements)</p>
<p>Design a query method with three parameters root, start and end, find the number of elements in the in array’s interval [start, end] by the given root of value SegmentTree.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SegmentTreeNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">int</span> start, end, count;</div><div class="line">    SegmentTreeNode *left, *right;</div><div class="line">    SegmentTreeNode(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> count) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;start = start;</div><div class="line">        <span class="keyword">this</span>-&gt;end = end;</div><div class="line">        <span class="keyword">this</span>-&gt;count = count;</div><div class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *@param root, start, end: The root of segment tree and </div><div class="line">     *                         an segment / interval</div><div class="line">     *@return: The count number in the interval [start, end] </div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(SegmentTreeNode *root, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>)</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (root-&gt;end &lt; start || root-&gt;start &gt; end)</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (root-&gt;start &gt;= start &amp;&amp; root-&gt;end &lt;= end)</div><div class="line">            <span class="keyword">return</span> root-&gt;count;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> query(root-&gt;left, start, end) + query(root-&gt;right, start, end);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Segment-Tree-Modify"><a href="#Segment-Tree-Modify" class="headerlink" title="Segment Tree Modify"></a>Segment Tree Modify</h3><p>For a Maximum Segment Tree, which each node has an extra value max to store the maximum value in this node’s interval.</p>
<p>Implement a modify function with three parameter root, index and value to change the node’s value with [start, end] = [index, index] to the new given value. Make sure after this change, every node in segment tree still has the max attribute with the correct value.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SegmentTreeNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">int</span> start, end, max;</div><div class="line">    SegmentTreeNode *left, *right;</div><div class="line">    SegmentTreeNode(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> max) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;start = start;</div><div class="line">        <span class="keyword">this</span>-&gt;end = end;</div><div class="line">        <span class="keyword">this</span>-&gt;max = max;</div><div class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *@param root, index, value: The root of segment tree and </div><div class="line">     *@ change the node's value with [index, index] to the new given value</div><div class="line">     *@return: void</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(SegmentTreeNode *root, <span class="keyword">int</span> index, <span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span> (root==<span class="literal">NULL</span>)</div><div class="line">            <span class="keyword">return</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (root-&gt;start==root-&gt;end) &#123;</div><div class="line">            root-&gt;max = value;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (index &lt;= root-&gt;left-&gt;end)</div><div class="line">            modify(root-&gt;left, index, value);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            modify(root-&gt;right, index, value);</div><div class="line">        </div><div class="line">        root-&gt;max = root-&gt;left-&gt;max &gt; root-&gt;right-&gt;max ?</div><div class="line">                    root-&gt;left-&gt;max : root-&gt;right-&gt;max;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="线段树应用"><a href="#线段树应用" class="headerlink" title="线段树应用"></a>线段树应用</h2><h3 id="Count-of-Smaller-Number-before-itself"><a href="#Count-of-Smaller-Number-before-itself" class="headerlink" title="Count of Smaller Number before itself"></a>Count of Smaller Number before itself</h3><p>Give you an integer array (index from 0 to n-1, where n is the size of this array, value from 0 to 10000) . For each element Ai in the array, count the number of element before this element Ai is smaller than it and return count number array.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">   <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> A: An integer array</div><div class="line">     * <span class="doctag">@return</span>: Count the number of element before this element 'ai' is </div><div class="line">     *          smaller than it and return count number array</div><div class="line">     */ </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> start, end;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> count;</div><div class="line">        <span class="keyword">public</span> SegmentTreeNode left, right;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SegmentTreeNode</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> count)</span> </span>&#123;</div><div class="line">              <span class="keyword">this</span>.start = start;</div><div class="line">              <span class="keyword">this</span>.end = end;</div><div class="line">              <span class="keyword">this</span>.count = count;</div><div class="line">              <span class="keyword">this</span>.left = <span class="keyword">this</span>.right = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    SegmentTreeNode root;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> SegmentTreeNode <span class="title">build</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span>(start &gt; end) &#123;  <span class="comment">// check core case</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        SegmentTreeNode root = <span class="keyword">new</span> SegmentTreeNode(start, end, <span class="number">0</span>);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(start != end) &#123;</div><div class="line">            <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</div><div class="line">            root.left = build(start, mid);</div><div class="line">            root.right = build(mid+<span class="number">1</span>, end);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            root.count =  <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> root;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">querySegmentTree</span><span class="params">(SegmentTreeNode root, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root.start &gt; end || root.end &lt; start) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root.start &gt;= start &amp;&amp; root.end &lt;= end) &#123;</div><div class="line">            <span class="keyword">return</span> root.count;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> querySegmentTree(root.left, start, end) + querySegmentTree(root.right, start, end);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modifySegmentTree</span><span class="params">(SegmentTreeNode root, <span class="keyword">int</span> index, <span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span>(root.start == index &amp;&amp; root.end == index) &#123; <span class="comment">// 查找到</span></div><div class="line">            root.count += value;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 查询</span></div><div class="line">        <span class="keyword">int</span> mid = (root.start + root.end) / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(root.start &lt;= index &amp;&amp; index &lt;=mid) &#123;</div><div class="line">            modifySegmentTree(root.left, index, value);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(mid &lt; index &amp;&amp; index &lt;= root.end) &#123;</div><div class="line">            modifySegmentTree(root.right, index, value);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//更新</span></div><div class="line">        root.count = root.left.count + root.right.count;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">countOfSmallerNumberII</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        root = build(<span class="number">0</span>, <span class="number">10000</span>);</div><div class="line">        ArrayList&lt;Integer&gt; ans = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">        <span class="keyword">int</span> res;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</div><div class="line">            res = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span>(A[i] &gt; <span class="number">0</span>) &#123;</div><div class="line">                res = querySegmentTree(root, <span class="number">0</span>, A[i]-<span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">            modifySegmentTree(root, A[i], <span class="number">1</span>);</div><div class="line">            ans.add(res);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Count-of-Smaller-Number"><a href="#Count-of-Smaller-Number" class="headerlink" title="Count of Smaller Number"></a>Count of Smaller Number</h3><p>Give you an integer array (index from 0 to n-1, where n is the size of this array, value from 0 to 10000) and an query list. For each query, give you an integer, return the number of element in the array that are smaller than the given integer.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">   <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> A: An integer array</div><div class="line">     * <span class="doctag">@return</span>: Count the number of element before this element 'ai' is </div><div class="line">     *          smaller than it and return count number array</div><div class="line">     */ </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SegmentTreeNode</span> </span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> start, end;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> count;</div><div class="line">        <span class="keyword">public</span> SegmentTreeNode left, right;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SegmentTreeNode</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> count)</span> </span>&#123;</div><div class="line">              <span class="keyword">this</span>.start = start;</div><div class="line">              <span class="keyword">this</span>.end = end;</div><div class="line">              <span class="keyword">this</span>.count = count;</div><div class="line">              <span class="keyword">this</span>.left = <span class="keyword">this</span>.right = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    SegmentTreeNode root;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> SegmentTreeNode <span class="title">build</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span>(start &gt; end) &#123;  <span class="comment">// check core case</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        SegmentTreeNode root = <span class="keyword">new</span> SegmentTreeNode(start, end, <span class="number">0</span>);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(start != end) &#123;</div><div class="line">            <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</div><div class="line">            root.left = build(start, mid);</div><div class="line">            root.right = build(mid+<span class="number">1</span>, end);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            root.count =  <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> root;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">querySegmentTree</span><span class="params">(SegmentTreeNode root, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root.start &gt; end || root.end &lt; start) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root.start &gt;= start &amp;&amp; root.end &lt;= end) &#123;</div><div class="line">            <span class="keyword">return</span> root.count;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> querySegmentTree(root.left, start, end) + querySegmentTree(root.right, start, end);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modifySegmentTree</span><span class="params">(SegmentTreeNode root, <span class="keyword">int</span> index, <span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        <span class="keyword">if</span>(root.start == index &amp;&amp; root.end == index) &#123; <span class="comment">// 查找到</span></div><div class="line">            root.count += value;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 查询</span></div><div class="line">        <span class="keyword">int</span> mid = (root.start + root.end) / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(root.start &lt;= index &amp;&amp; index &lt;=mid) &#123;</div><div class="line">            modifySegmentTree(root.left, index, value);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(mid &lt; index &amp;&amp; index &lt;= root.end) &#123;</div><div class="line">            modifySegmentTree(root.right, index, value);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//更新</span></div><div class="line">        root.count = root.left.count + root.right.count;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">countOfSmallerNumber</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] queries)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code here</span></div><div class="line">        root = build(<span class="number">0</span>, <span class="number">10000</span>);</div><div class="line">        ArrayList&lt;Integer&gt; ans = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">        <span class="keyword">int</span> res;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</div><div class="line">            modifySegmentTree(root, A[i], <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; queries.length; i++) &#123;</div><div class="line">            res = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span>(queries[i] &gt; <span class="number">0</span>)</div><div class="line">                res = querySegmentTree(root, <span class="number">0</span>, queries[i] - <span class="number">1</span>);</div><div class="line">            ans.add(res);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Segment-Tree实现"><span class="toc-number">1.</span> <span class="toc-text">Segment Tree实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Build"><span class="toc-number">1.1.</span> <span class="toc-text">Segment Tree Build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Build-II"><span class="toc-number">1.2.</span> <span class="toc-text">Segment Tree Build II</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Query"><span class="toc-number">1.3.</span> <span class="toc-text">Segment Tree Query</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Query-II"><span class="toc-number">1.4.</span> <span class="toc-text">Segment Tree Query II</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Segment-Tree-Modify"><span class="toc-number">1.5.</span> <span class="toc-text">Segment Tree Modify</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#线段树应用"><span class="toc-number">2.</span> <span class="toc-text">线段树应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Count-of-Smaller-Number-before-itself"><span class="toc-number">2.1.</span> <span class="toc-text">Count of Smaller Number before itself</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Count-of-Smaller-Number"><span class="toc-number">2.2.</span> <span class="toc-text">Count of Smaller Number</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2016/06/03/segment-tree/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2016/06/03/segment-tree/&text=Segment Tree"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2016/06/03/segment-tree/&is_video=false&description=Segment Tree"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Segment Tree&body=Check out this article: http://yoursite.com/2016/06/03/segment-tree/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2016/06/03/segment-tree/&title=Segment Tree"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2016/06/03/segment-tree/&name=Segment Tree&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 zhtwd
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


</body>
</html>
